<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Rovigoal - Gestione Squadre</title>
    <style>
        body { font-family: Arial; background: #f0f2f5; padding: 20px; }
        .form-container { max-width: 500px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
        button { width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>âž• Aggiungi Nuova Squadra</h2>
        <input type="text" id="nomeSquadra" placeholder="Nome della squadra...">
        <button id="btnSalva">SALVA SQUADRA</button>
        <p id="messaggio" style="text-align:center;"></p>
        <hr>
        <center><a href="admin.html">Torna ad Admin</a></center>
    </div>

    <script type="module">
        import supabase from './supabase-config.js';

        document.getElementById('btnSalva').addEventListener('click', async () => {
            const nome = document.getElementById('nomeSquadra').value;
            if (!nome) return alert("Inserisci un nome!");

            const { data, error } = await supabase
                .from('squadre')
                .insert([{ nome: nome, punti: 0, vittorie: 0, pareggi: 0, sconfitte: 0 }]);

            if (error) {
                document.getElementById('messaggio').innerText = "Errore: " + error.message;
                document.getElementById('messaggio').style.color = "red";
            } else {
                document.getElementById('messaggio').innerText = "Squadra salvata con successo!";
                document.getElementById('messaggio').style.color = "green";
                document.getElementById('nomeSquadra').value = "";
            }
        });
    </script>
</body>
</html>
